
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Event</title>

  <!-- bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- custom CSS -->
  <link rel="stylesheet" href="/main.css" />
</head>

<!-- main page layout using dark bg and beige text -->
<body class="bg-charcoal text-beige">

  <!-- container to center and constrain content width -->
  <div class="container py-5" style="max-width: 800px;">

    <!-- page heading and metadata display-->
    <h1 class="text-heading mb-3">Edit Event</h1>
    <p><strong>Created On:</strong> <%= event.created_at %></p>

    <!-- output: display validation error messages if avail -->
    <% if (error) { %>
      <div class="alert alert-danger"><%= error %></div>
    <% } %>

    <!-- event form
     purpose: handles both creating new events and editing existing ones
     input: title, description, date, time, ticket quantities and ticket prices
     output: POSTs to /organiser/new or /organiser/edit/:id
     -->

    <div class="form-outline mt-4">
    <form action="<%= event.id ? ('/organiser/edit/' + event.id) : '/organiser/new' %>" method="POST">

      <!-- input: event title -->
      <div class="mb-3">
        <label class="form-label">Event Title:</label>
        <input type="text" name="title" value="<%= event.title %>" class="form-control" required />
      </div>

      <!-- input: event description -->
      <div class="mb-3">
        <label class="form-label">Event Description:</label>
        <textarea name="description" class="form-control" rows="4"><%= event.description %></textarea>
      </div>

      <!-- input: event date and time -->
      <div class="row mb-3">
        <div class="col-md-6">
          <label class="form-label">Event Date:</label>
          <input type="date" name="date" value="<%= event.date %>" class="form-control" required />
        </div>
        <div class="col-md-6">
          <label class="form-label">Event Time:</label>
          <input type="time" name="time" value="<%= event.time || '' %>" class="form-control" />
        </div>
      </div>

      <!-- input: full ticket qty and price -->
      <div class="mb-3">
        <label class="form-label">Full-Price Tickets:</label>
        <div class="row g-2">
          <div class="col">
            <input type="number" name="full_quantity" value="<%= fullTicket.quantity %>" class="form-control" placeholder="Quantity" />
          </div>
          <div class="col">
            <input type="number" step="0.01" name="full_price" value="<%= fullTicket.price %>" class="form-control" placeholder="Price" />
          </div>
        </div>
      </div>

      <!-- input: concession ticket qty and price -->
      <div class="mb-4">
        <label class="form-label">Concession Tickets:</label>
        <div class="row g-2">
          <div class="col">
            <input type="number" name="concession_quantity" value="<%= concessionTicket.quantity %>" class="form-control" placeholder="Quantity" />
          </div>
          <div class="col">
            <input type="number" step="0.01" name="concession_price" value="<%= concessionTicket.price %>" class="form-control" placeholder="Price" />
          </div>
        </div>
      </div>

      <!-- submit button for form -->
      <button type="submit" class="btn btn-slate me-2">Submit Changes</button>
      
    </form>
    </div>

    <!-- navigation to link back to organiser homepg-->
    <a href="/organiser" class="btn btn-mocha mt-4">Back to Organiser Home Page</a>

  </div>

</body>
</html>